<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Playable Ad</title>

        <meta
            name="viewport"
            content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1"
        />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="renderer" content="webkit" />
        <meta name="force-rendering" content="webkit" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="full-screen" content="yes" />
        <meta name="x5-fullscreen" content="true" />
        <meta name="360-fullscreen" content="true" />
        <meta name="screen-orientation" content />
        <meta name="x5-orientation" content />
        <meta name="x5-page-mode" content="app" />
        <meta name="ad.size" content="width=320,height=480" />

        <style>
            body {
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background-color: #f4f4f4;
            }
            #ad-container {
                width: 300px;
                height: 250px;
                background-color: #007bff;
                color: white;
                text-align: center;
                line-height: 250px;
                cursor: pointer;
                border-radius: 8px;
            }
        </style>
    </head>
    <body>
        <div id="ad-container">Click to Expand</div>

        <script>
            function initMRAID() {
                if (mraid.getState() === "loading") {
                    mraid.addEventListener("ready", setupAd);
                } else {
                    setupAd();
                }
            }

            function setupAd() {
                const adContainer = document.getElementById("ad-container");

                // Expand on click
                adContainer.addEventListener("click", () => {
                    if (mraid.isViewable()) {
                        mraid.expand();
                    } else {
                        console.log("Ad is not viewable");
                    }
                });

                // State change listener
                mraid.addEventListener("stateChange", (state) => {
                    if (state === "expanded") {
                        adContainer.textContent = "Ad Expanded! Tap to Close";
                        adContainer.style.lineHeight = "500px";
                        adContainer.style.height = "500px";
                    } else if (state === "default") {
                        adContainer.textContent = "Click to Expand";
                        adContainer.style.lineHeight = "250px";
                        adContainer.style.height = "250px";
                    }
                });

                // Viewable change listener
                mraid.addEventListener("viewableChange", (isViewable) => {
                    console.log("Viewable state changed:", isViewable);
                });
            }

            // Initialize MRAID if available
            if (typeof mraid !== "undefined") {
                initMRAID();
            } else {
                console.error(
                    "MRAID is not available. Test in an MRAID-compliant environment."
                );
            }
        </script>
    </body>
</html>
